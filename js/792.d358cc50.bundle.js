"use strict";(self.webpackChunklumie=self.webpackChunklumie||[]).push([[792],{424:(e,t,a)=>{a.d(t,{Gm:()=>m,IW:()=>i,N7:()=>f,WW:()=>l,ZE:()=>r,_n:()=>n,_p:()=>s,fo:()=>c,mS:()=>o,uh:()=>d});const n="https://api.kevinjobs.com:5000",i=n+"/upload",l=n+"/file/list",s=n+"/file",r=n+"/token",c=n+"/post/list",o=n+"/p",m=n+"/user/list",d=n+"/user",f=n+"/invitation/list"},5411:(e,t,a)=>{a.d(t,{h4:()=>l});var n=a(2983);const i={header:"header_iinvagw0nm",container:"container__LoW6mlUak"};function l({children:e}){return n.createElement("div",{className:i.header},e)}},5890:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(2983),i=a(2747),l=a(5411),s=a(2161),r=a(424);var c=a(6264);function o(){const[e,t]=(0,n.useState)(!0),[a,o]=(0,n.useState)(0),[d,f]=(0,n.useState)([]),u=()=>{(async()=>{const e=await async function(e){const t=await s.Z.get(r.WW,{params:e});return 0===t.data.code?(t.data.data.files.forEach((e=>{e.url=r._n+"/static/thumb-"+e.filename})),t.data):t.data.msg}({offset:a});"string"!=typeof e?(f([...d,...e.data.files]),e.data.offset+e.data.limit>=e.data.totals&&t(!1)):c.N.show({type:"error",message:e})})()},p=(e,t)=>{window.confirm("确定删除?")&&(async()=>{const e=await async function(e){const t=await s.Z.delete(r._p,{params:{filename:e}});return 0===t.data.code?t.data:t.data.msg}(t);if("string"!=typeof e){window.alert("删除成功");const e=m(t,d),a=[...d];a.splice(e,1),f(a)}else window.alert(e)})()};return(0,n.useEffect)((()=>{e&&u()}),[a]),n.createElement("div",{className:"file-list-admin"},n.createElement(l.h4,null,n.createElement("h2",null,"文件列表")),n.createElement("div",{className:"file-list"},d&&d.map((e=>n.createElement("div",{className:"file-item",key:e.filename+e.origin},n.createElement("span",{id:"file-preview"},n.createElement("img",{src:e.url,alt:e.filename}),n.createElement("span",{id:"delete-file",onClick:t=>p(0,e.filename),"data-filename":e.filename},n.createElement(i.JO,{name:"error"})))))),e&&n.createElement("div",{id:"load-more-file",onClick:()=>{o(a+10)}},"加载更多")))}const m=(e,t)=>{for(let a=0;a<t.length;a++)if(t[a].filename===e)return a}},2161:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(5326),i=a.n(n),l=a(424);const s=i().create();s.defaults.baseURL=l._n,s.interceptors.request.use((e=>(e.data=JSON.stringify(e.data),e.headers={"content-type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},e)));const r=s}}]);