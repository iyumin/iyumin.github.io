"use strict";(self.webpackChunklumie=self.webpackChunklumie||[]).push([[630],{9630:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var n=t(2983),l=t(5619),i=t(3255),s=t(6433),c=t(8432);function r(){const[e,a]=(0,n.useState)(!0),[t,r]=(0,n.useState)(0),[f,d]=(0,n.useState)([]),o=()=>{(async()=>{const e=await async function(e){const a=await s.Z.get(c.WW,{params:e});return 0===a.data.code?(a.data.data.files.forEach((e=>{e.url=c._n+"/static/thumb-"+e.filename})),a.data):a.data.msg}({offset:t});"string"!=typeof e?(d([...f,...e.data.files]),e.data.offset+e.data.limit>=e.data.totals&&a(!1)):window.alert(e)})()},u=(e,a)=>{window.confirm("确定删除?")&&(async()=>{const e=await async function(e){const a=await s.Z.delete(c._p,{params:{filename:e}});return 0===a.data.code?a.data:a.data.msg}(a);if("string"!=typeof e){window.alert("删除成功");const e=m(a,f),t=[...f];t.splice(e,1),d(t)}else window.alert(e)})()};return(0,n.useEffect)((()=>{e&&o()}),[t]),n.createElement("div",{className:"file-list-admin"},n.createElement(i.h4,null,n.createElement(i.h4.Title,null,"文件列表")),n.createElement("div",{className:"file-list"},f&&f.map((e=>n.createElement("div",{className:"file-item",key:e.filename+e.origin},n.createElement("span",{id:"file-preview"},n.createElement("img",{src:e.url,alt:e.filename}),n.createElement("span",{id:"delete-file",onClick:a=>u(0,e.filename),"data-filename":e.filename},n.createElement(l.JO,{name:"error"})))))),e&&n.createElement("div",{id:"load-more-file",onClick:()=>{r(t+10)}},"加载更多")))}const m=(e,a)=>{for(let t=0;t<a.length;t++)if(a[t].filename===e)return t}}}]);